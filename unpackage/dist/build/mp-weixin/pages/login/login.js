(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"0df2":function(e,t,o){"use strict";var n;o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return a})),o.d(t,"a",(function(){return n}));var r=function(){var e=this,t=e.$createElement;e._self._c},a=[]},"39f6":function(e,t,o){"use strict";o.r(t);var n=o("a953"),r=o.n(n);for(var a in n)"default"!==a&&function(e){o.d(t,e,(function(){return n[e]}))}(a);t["default"]=r.a},"52c8":function(e,t,o){"use strict";o.r(t);var n=o("0df2"),r=o("39f6");for(var a in r)"default"!==a&&function(e){o.d(t,e,(function(){return r[e]}))}(a);o("91b5");var i,s=o("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,"41b3825e",null,!1,n["a"],i);t["default"]=c.exports},"6c13":function(e,t,o){"use strict";(function(e){o("2331");n(o("66fd"));var t=n(o("52c8"));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=o,e(t.default)}).call(this,o("543d")["createPage"])},"91b5":function(e,t,o){"use strict";var n=o("b778"),r=o.n(n);r.a},a953:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o("098d"),r=a(o("268c"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){c(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function c(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var u={name:"",components:{},data:function(){return{formData:{password:"",username:"",openid:""},isRead:!1,isChecket:!1,code:"",isValue:!1}},onLoad:function(e){if(e.loginForm){var t=JSON.parse(e.loginForm);this.formData.username=t.username,this.formData.password=t.password}},computed:{},created:function(){},methods:{checkboxChange:function(){this.isChecket=!this.isChecket},validate:function(){if(this.formData.username)if(this.formData.password){if(this.isChecket)return!0;e.showModal({title:"提示",content:"请仔细阅读并同意协议",showCancel:!1})}else e.showModal({title:"提示",content:"请输入密码",showCancel:!1});else e.showModal({title:"提示",content:"请输入用户名",showCancel:!1})},loginHandle:function(){var t=this;this.validate()&&e.login({provider:"weixin",success:function(e){console.log(e),"login:ok"==e.errMsg&&(t.code=e.code,t.$cloud({name:"wxLogin",data:{js_code:t.code}}).then((function(e){console.log(e,"wwxxxxxxxxxxxxx"),(0,n.setOpenId)(e.data),t.formData.openid=e.data.openid,t.login()})))}})},bindGetUserInfo:function(t){var o=this;console.log(t),this.isChecket?(e.login({provider:"weixin",success:function(e){console.log(e),"login:ok"==e.errMsg&&(o.code=e.code)}}),e.getUserProfile({desc:"用于获取用户的信息资料",success:function(e){console.log(e),(0,n.setWxLoginUserInfo)(e.userInfo),o.$cloud({name:"wxLogin",data:{js_code:o.code}}).then((function(e){console.log(e,"wwxxxxxxxxxxxxx"),(0,n.setOpenId)(e.data),o.formData.openid=e.data.openid,o.formData.username="",o.formData.password="",o.login()}))}})):e.showModal({title:"提示",content:"请仔细阅读并同意协议",showCancel:!1})},login:function(){var t=this,o=JSON.parse(JSON.stringify(this.formData));o.password&&(o.password=r.default.sha1(o.password)),this.$cloud({name:"login",data:s({},o)}).then((function(r){console.log(r,"1111111111"),0===r.code?(t.formData.openid&&t.formData.password&&(0,n.setLoginUserInfo)(o),t.formData.username="",t.formData.password="",t.formData.openid="",e.showToast({title:"登录成功！"}),setTimeout((function(){e.redirectTo({url:"../home/home"})}),500)):e.showToast({title:r.msg,icon:"error"})}))},agreementHandle:function(){},registerHandle:function(){e.navigateTo({url:"../register/register"})}}};t.default=u}).call(this,o("543d")["default"])},b778:function(e,t,o){}},[["6c13","common/runtime","common/vendor"]]]);